<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8"/>
    <title>购物车</title>




    <meta name="apple-mobile-web-app-capable" content="yes"/>
    <!--购物车的css-->
    <link rel="stylesheet" href="../shopping/shoppingcar/css/style.css"/>

    <link href="../shopping/styles.css" type="text/css" rel="stylesheet"/>
    <link href="../shopping/styles(1).css" type="text/css" rel="stylesheet"/>
    <script src="../shopping/jquery-1.7.1.min.js"></script>
    <!--购物车的js-->
    <script src="../shopping/shoppingcar/js/demo.js"></script>
    <script src="../shopping/jquery-ui-1.8.10.custom.min.js"></script>
    <script src="../shopping/axQuery.js"></script>
    <script src="../shopping/globals.js"></script>
    <script src="../shopping/axutils.js"></script>
    <script src="../shopping/annotation.js"></script>
    <script src="../shopping/axQuery.std.js"></script>
    <script src="../shopping/doc.js"></script>
    <script src="../shopping/document.js"></script>

    <script src="../shopping/messagecenter.js"></script>
    <script src="../shopping/events.js"></script>
    <script src="../shopping/recording.js"></script>
    <script src="../shopping/action.js"></script>
    <script src="../shopping/expr.js"></script>
    <script src="../shopping/geometry.js"></script>
    <script src="../shopping/flyout.js"></script>
    <script src="../shopping/ie.js"></script>
    <script src="../shopping/model.js"></script>
    <script src="../shopping/repeater.js"></script>
    <script src="../shopping/sto.js"></script>
    <script src="../shopping/utils.temp.js"></script>
    <script src="../shopping/variables.js"></script>
    <script src="../shopping/drag.js"></script>
    <script src="../shopping/move.js"></script>
    <script src="../shopping/visibility.js"></script>
    <script src="../shopping/style.js"></script>
    <script src="../shopping/adaptive.js"></script>
    <script src="../shopping/tree.js"></script>
    <script src="../shopping/init.temp.js"></script>
    <script src="../shopping/data.js"></script>
    <script src="../shopping/legacy.js"></script>
    <script src="../shopping/viewer.js"></script>
    <script src="../shopping/math.js"></script>


    <script type="text/javascript">
        $axure.utils.getTransparentGifPath = function() { return 'resources/images/transparent.gif'; };
        $axure.utils.getOtherPath = function() { return 'resources/Other.html'; };
        $axure.utils.getReloadPath = function() { return 'resources/reload.html'; };
    </script>

    <style>
        .gw_num{border: 1px solid #dbdbdb;width: 110px;line-height: 26px;overflow: hidden;}
        .gw_num em{display: block;height: 26px;width: 26px;float: left;color: #7A7979;border-right: 1px solid #dbdbdb;text-align: center;cursor: pointer;}
        .gw_num .num{display: block;float: left;text-align: center;width: 52px;font-style: normal;font-size: 14px;line-height: 24px;border: 0;}
        .gw_num em.add{float: right;border-right: 0;border-left: 1px solid #dbdbdb;}
    </style>

</head>
<body>


<div id="base" class="">

    <!-- 顶部悬浮栏 (动态面板) -->
    <div id="u2091" class="ax_default" data-label="顶部悬浮栏" style="z-index: 1001;">
        <div id="u2091_state0" class="panel_state" data-label="全">
            <div id="u2091_state0_content" class="panel_state_content">



                <!-- Unnamed (矩形) -->
                <div id="u2096" class="ax_default label">
                    <div id="u2096_div" class=""></div>
                    <!-- Unnamed () -->
                    <div id="u2097" class="text" style="visibility: visible;">
                        <p><span>优惠卷</span></p>
                    </div>
                </div>

                <!-- Unnamed (组合) -->
                <div id="u2098" class="ax_default">

                    <!-- Unnamed (矩形) -->
                    <div id="u2099" class="ax_default label">
                        <div id="u2099_div" class=""></div>
                        <!-- Unnamed () -->
                        <div id="u2100" class="text" style="visibility: visible;">
                            <p><span>我的果仁</span></p>
                        </div>
                    </div>

                    <!-- Unnamed (形状) -->
                    <div id="u2101" class="ax_default icon">
                        <img id="u2101_img" class="img " src="../shopping/u589.png"/>
                        <!-- Unnamed () -->
                        <div id="u2102" class="text" style="display: none; visibility: hidden">
                            <p><span></span></p>
                        </div>
                    </div>
                </div>

                <!-- Unnamed (组合) -->
                <div id="u2103" class="ax_default">

                    <!-- Unnamed (矩形) -->
                    <div id="u2104" class="ax_default label">
                        <div id="u2104_div" class=""></div>
                        <!-- Unnamed () -->
                        <div id="u2105" class="text" style="visibility: visible;">
                            <p><span>我的果篮</span></p>
                        </div>
                    </div>

                    <!-- Unnamed (形状) -->
                    <div id="u2106" class="ax_default icon">
                        <img id="u2106_img" class="img " src="../shopping/u594.png"/>
                        <!-- Unnamed () -->
                        <div id="u2107" class="text" style="display: none; visibility: hidden">
                            <p><span></span></p>
                        </div>
                    </div>
                </div>

                <!-- Unnamed (矩形) -->
                <div id="u2108" class="ax_default label">
                    <div id="u2108_div" class=""></div>
                    <!-- Unnamed () -->
                    <div id="u2109" class="text" style="visibility: visible;">
                        <p><span>充值有礼</span></p>
                    </div>
                </div>

                <!-- Unnamed (矩形) -->
                <div id="u2110" class="ax_default label">
                    <div id="u2110_div" class=""></div>
                    <!-- Unnamed () -->
                    <div id="u2111" class="text" style="visibility: visible;">
                        <p><span>[登录]</span></p>
                    </div>
                </div>

                <!-- Unnamed (矩形) -->
                <div id="u2112" class="ax_default label">
                    <div id="u2112_div" class=""></div>
                    <!-- Unnamed () -->
                    <div id="u2113" class="text" style="visibility: visible;">
                        <p><span>[注册]</span></p>
                    </div>
                </div>

                <!-- Unnamed (矩形) -->
                <div id="u2114" class="ax_default box_2">
                    <div id="u2114_div" class=""></div>
                    <!-- Unnamed () -->
                    <div id="u2115" class="text" style="display: none; visibility: hidden">
                        <p><span></span></p>
                    </div>
                </div>

                <!-- Unnamed (矩形) -->
                <div id="u2116" class="ax_default _二级标题">
                    <div id="u2116_div" class=""></div>
                    <!-- Unnamed () -->
                    <div id="u2117" class="text" style="visibility: visible;">
                        <p><span>LOGO 果鲜生</span></p>
                    </div>
                </div>

                <!-- Unnamed (组合) -->
                <div id="u2118" class="ax_default">

                    <!-- Unnamed (矩形) -->
                    <div id="u2119" class="ax_default box_1">
                        <div id="u2119_div" class=""></div>
                        <!-- Unnamed () -->
                        <div id="u2120" class="text" style="visibility: visible; top: 11px; transform-origin: 277.5px 9.5px 0px;">
                            <p><span>&nbsp;&nbsp; &nbsp; 试试 “红心火龙果”</span></p>
                        </div>
                    </div>

                    <!-- Unnamed (矩形) -->
                    <div id="u2121" class="ax_default box_1">
                        <div id="u2121_div" class=""></div>
                        <!-- Unnamed () -->
                        <div id="u2122" class="text" style="visibility: visible; top: 11px; transform-origin: 39.5px 9.5px 0px;">
                            <p><span>搜索</span></p>
                        </div>
                    </div>
                </div>





                <!-- Unnamed (矩形) -->
                <div id="u2132" class="ax_default label">
                    <div id="u2132_div" class=""></div>
                    <!-- Unnamed () -->
                    <div id="u2133" class="text" style="visibility: visible;">
                        <p><span>江西脐橙</span></p>
                    </div>
                </div>

                <!-- Unnamed (矩形) -->
                <div id="u2134" class="ax_default label">
                    <div id="u2134_div" class=""></div>
                    <!-- Unnamed () -->
                    <div id="u2135" class="text" style="visibility: visible;">
                        <p><span>哈密瓜</span></p>
                    </div>
                </div>

                <!-- Unnamed (矩形) -->
                <div id="u2136" class="ax_default label">
                    <div id="u2136_div" class=""></div>
                    <!-- Unnamed () -->
                    <div id="u2137" class="text" style="visibility: visible;">
                        <p><span>草莓</span></p>
                    </div>
                </div>

                <!-- Unnamed (矩形) -->
                <div id="u2138" class="ax_default label">
                    <div id="u2138_div" class=""></div>
                    <!-- Unnamed () -->
                    <div id="u2139" class="text" style="visibility: visible;">
                        <p><span>猕猴桃</span></p>
                    </div>
                </div>

                <!-- Unnamed (热区) -->
                <div id="u2140" class="ax_default" tabindex="0" style="cursor: pointer;">
                </div>

                <!-- Unnamed (热区) -->
                <div id="u2141" class="ax_default" tabindex="0" style="cursor: pointer;">
                </div>
            </div>
        </div>
        <div id="u2091_state1" class="panel_state" data-label="精简" style="display: none; visibility: hidden;">
            <div id="u2091_state1_content" class="panel_state_content">

                <!-- Unnamed (矩形) -->
                <div id="u2142" class="ax_default box_2">
                    <div id="u2142_div" class=""></div>
                    <!-- Unnamed () -->
                    <div id="u2143" class="text" style="display: none; visibility: hidden">
                        <p><span></span></p>
                    </div>
                </div>

                <!-- Unnamed (矩形) -->
                <div id="u2144" class="ax_default _二级标题">
                    <div id="u2144_div" class=""></div>
                    <!-- Unnamed () -->
                    <div id="u2145" class="text" style="visibility: visible;">
                        <p><span>LOGO 果鲜生</span></p>
                    </div>
                </div>

                <!-- Unnamed (组合) -->
                <div id="u2146" class="ax_default">

                    <!-- Unnamed (矩形) -->
                    <div id="u2147" class="ax_default box_1">
                        <div id="u2147_div" class=""></div>
                        <!-- Unnamed () -->
                        <div id="u2148" class="text" style="visibility: visible;">
                            <p><span>&nbsp;&nbsp; &nbsp; 试试 “红心火龙果”</span></p>
                        </div>
                    </div>

                    <!-- Unnamed (矩形) -->
                    <div id="u2149" class="ax_default box_1">
                        <div id="u2149_div" class=""></div>
                        <!-- Unnamed () -->
                        <div id="u2150" class="text" style="visibility: visible;">
                            <p><span>搜索</span></p>
                        </div>
                    </div>
                </div>





                <!-- Unnamed (热区) -->
                <div id="u2155" class="ax_default" tabindex="0" style="cursor: pointer;">
                </div>

                <!-- Unnamed (热区) -->
                <div id="u2156" class="ax_default" tabindex="0" style="cursor: pointer;">
                </div>
            </div>
        </div>
    </div>

    <!-- Unnamed (组合) -->
    <div id="u2157" class="ax_default">

        <!-- Unnamed (组合) -->
        <div id="u2158" class="ax_default" style="cursor: pointer;">

            <!-- Unnamed (矩形) -->
            <div id="u2159" class="ax_default box_2">
                <div id="u2159_div" class="" tabindex="0"></div>
                <!-- Unnamed () -->
                <div id="u2160" class="text" style="visibility: visible; top: 11px; transform-origin: 88px 10px 0px;">
                    <p><span>我的果篮</span></p>
                </div>
            </div>
        </div>
    </div>




    <!-- Unnamed (矩形)我的果篮 -->
    <div id="u2161" class="ax_default box_2">
        <div style="float:left;border: solid 1px rgba(215, 215, 215, 1)" class="">
            <div style="width:100%;">

                <!-- <span>暂无商品</span> -->
                <!-- 付款区 -->
                <div style="margin-left:-4px;width:100%;height:100%;margin-top: 10px;margin-bottom: -8px">

                    <!--/*@thymesVar id="put" type=""*/-->
                    <div th:style="${flag}!=''?'display: none':''" >
                        <table width="100%" height="200px" >
                            <tr>
                                <td><font color="#c0c0c0" size="5px" face="宋体"><b>暂无商品</b></font></td>
                            </tr>
                        </table>
                    </div>


                    <div th:style="${flag}!=''?'':'display: none'">





                        <table style="margin-left: 3px;width:100.2%;margin-top: -40px" id="cartTable">
                            <thead bgcolor="#e9e9e9">
                            <tr height="30px">
                                <th align="right" width="70px"><label><input class="check-all check" type="checkbox"/>&nbsp;全选</label></th>
                                <th><span>商品信息</span></th>
                                <th align="left">规格</th>
                                <th align="left">单价</th>
                                <th>数量</th>
                                <th>小计</th>
                                <th>操作</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr th:each="test:${fruitsInfo}" style="border-bottom: 1px solid #d3d3d3">
                                <td height="80px" class="checkbox"><center><input class="check-one check" type="checkbox"/></center></td>
                                <td class="goods" style="width: 420px">
                                    <img style="width: 80px;height: 60px" th:src="${test.img1}" alt=""/>
                                    <span th:text="${test.title}"></span>

                                </td>
                                <td th:text="${test.norms}" align="left" >
                                </td>
                                <td class="price" th:text="${test.price}" align="left">
                                </td>
                                <td class="count">
                                    <span class="reduce">-</span>
                                    <input class="count-input" type="text" th:value="${test.amount}"/>
                                    <span class="add" >+</span>
                                </td>
                                <td class="subtotal" align="center" th:text="${#numbers.formatDecimal(test.amount*test.price,2,2)}">
                                </td>
                                <td class="operation">
                                    <input class="stock" type="hidden" th:value="${test.num}"/>
                                    <a th:onclick="'javascript:delOne('+${test.id}+')'">删除</a>
                                    <input class="id" type="hidden" th:value="${test.id}"/>
                                </td>
                         </tr>

                            </tbody>
                        </table>

                        <div class="foot" id="foot" style="margin-left: 3px;margin-top: 0px;width: 1145px">

                            <label class="fl select-all" style="margin-left: -10px">
                                <a  href="javascript:delAll()" style="margin-left: 25px">清空购物车</a>
                            </label>
                            <div class="fr closing"><span id="settlement">结 算</span></div>
                            <div class="fr total">合计：￥<span id="priceTotal">0.00</span></div>
                            <div class="fr selected" id="selected">已选商品<span id="selectedTotal">0</span>件<span class="arrow up">︽</span><span class="arrow down">︾</span></div>
                            <div class="selected-view">
                                <div id="selectedViewList" class="clearfix">
                                    <div><img src="../shopping/shoppingcar/images/1.jpg"><span>取消选择</span></div>
                                </div>
                                <span class="arrow">◆<span>◆</span></span>
                            </div>
                        </div>

                    </div>

                </div>

                <!-- 大家都在看 -->
                <div style="margin-top:-8px;height:55px;" class="">

                    <table style="margin-top:8px;margin-left:0px;width:100%;height:100%;border-top: 1px solid #d3d3d3" >

                        <tr style="border-bottom: 1px solid #d3d3d3">
                            <td width="170px"><font face="微软雅黑" size="4px"><b>大家都在看</b></font></td>
                            <td width="820px"></td>
                            <td><div style="cursor: pointer;"><font size="3px" id="next">换一批</font></div></td>
                        </tr>

                    </table>


                    <!-- 商品 -->
                    <div style="width:100%;margin-top: 16px" id="commodity">

                    </div>
                </div>
                <!-- 底部 -->
                <div >
                    <div style="margin-left:1px;margin-top:50px;float:left;background:inherit;background-color:rgba(51, 51, 51, 1);width:1144px;height:82px;">
                        <p><span><font color="#ffffff">底部信息区域</font></span></p>
                    </div>
                </div>

            </div>
        </div>
    </div>

    <script  type="text/javascript">










            //单个删除
            function delOne(id){
                var con = confirm('确定删除商品吗？');
                if(con){
                    $.ajax({
                        url:'../fruitsInfo/deleteCart',
                        type:'post',
                        data:{fruitsId:id},
                        success:function(result){
                            if(result){
                                location.href = "../fruitsInfo/toShoppingCar";
                            }
                        }
                    })
                }
            }

            //清空购物车
            function delAll(){
                var con = confirm('确定删除商品吗？');
                if(con) {
                    $.ajax({
                        url: '../fruitsInfo/deleteAllCart',
                        type: 'post',
                        data: {},
                        success: function (result) {
                            if (result) {
                                location.href = "../fruitsInfo/toShoppingCar";
                            }
                        }
                    })
                }
            }

            /*var html2 = 0 ;

            function table(){
                $.ajax({
                    url:'../shopping/queryTable',
                    data:{},
                    type:'post',
                    success:function(result){
                        var html = "";


                        result.forEach(function(i){
                            html2 += parseFloat((parseFloat(i.onePrice)*parseFloat(i.count)).toFixed(2));

                            var total = (parseFloat(i.onePrice)*parseFloat(i.count)).toFixed(2);
                            html += '<table >' +
                                '<tr>' +
                                '<td width="60px"><input type="checkbox" value="'+total+'" name="check" class="checkOne" onclick="clickOne('+i.userId+','+i.userSex+')" checked="checked"/></td>' +
                                '<td width="100px"><img width="65px" height="50px" class="img " src="'+i.img+'"/></td>' +
                                '<td width="280px" align="left">' +
                                ''+i.goodName+'' +
                                '</td>' +
                                '<td width="200px">' +
                                ''+i.spec+'' +
                                '</td>' +
                                '<td width="200px">￥<span id="money"> '+parseFloat(i.onePrice).toFixed(2)+' </span><del>￥40</del></td>' +
                                '<td width="150px">' +
                                '<div class="gw_num">' +
                                '<em class="jian" onclick="javascript:jian('+i.onePrice+','+i.count+','+i.id+')">-</em>' +
                                '<span id="count'+i.id+'">'+i.count+'</span>' +
                                '<em class="add" onclick="javascript:jia('+i.onePrice+','+i.count+','+i.id+')">+</em>' +
                                '</div>' +
                                '</td>' +
                                '<td width="130px"><font color="red"><b>￥' +
                                '<span id="total'+i.id+'">'+total+'</span>' +
                                '</b></font></td>' +
                                '<td width="120px" style="cursor: pointer;">删除</td>' +
                                '</tr>' +
                                '<tr>' +
                                '<td colspan="8"><img src="../shopping/u2191.png"/></td>' +
                                '</tr>' +
                                '</table>';

                        })
                        $('#tablesssss').html(html);
                        $('#total').html(html2.toFixed(2));
                    }
                })
            }
            function jia(onePrice,count,id){
                var counts = $('#count'+id+'').html();
                counts++;
                $('#total'+id+'').html((parseFloat(onePrice)*parseFloat(counts)).toFixed(2));
                $('#count'+id+'').html(counts);

            }

            function jian(onePrice,count,id){

                var counts = $('#count'+id+'').html();

                counts--;
                if(counts == 0){
                    return ;
                }
                $('#total'+id+'').html((parseFloat(onePrice)*(parseFloat(counts)+1)-parseFloat(onePrice)).toFixed(2));
                $('#count'+id+'').html(counts);


            }*/


            //换一批
            $('#next').click(function(){
                Commodity();

            })


            $(function(){
                Commodity();
                table();

            })

            //商品列表
            function Commodity(){
                $.ajax({
                    url:'../shopping/queryFruitsInfo',
                    type:"post",
                    success:function(result){
                        var html = "";
                        result.forEach(function(i){
                            html += ' <div style="float:left;width:10%;height:100%;margin-top: 8px;margin-left: 42px">' +
                                ' <img style="cursor: pointer;" width="130px" height="130px" src="'+i.img1+'"/>' +
                                ' <p><span><font color="red"><b>￥'+i.price+'</b></font></span></p>' +
                                ' </div>';
                        })
                        $('#commodity').html(html);
                    }
                })
            }

    </script>
    <!--大家都在看列表-->

    <!--购物车增减按钮-->
    <!--<script type="text/javascript">

        $('#total').html(parseFloat($('#oneMoney').html()));

        //输入
        $(".num").change(function(){
            var num = $('.num').val();
            var count = 5;
            if(num>count){
                $('.num').val(count);
                $('#oneMoney').html((parseFloat($('#money').html())*count).toFixed(2))
                $('#total').html(parseFloat($('#oneMoney').html()).toFixed(2));
                return ;
            }
            $('#oneMoney').html((parseFloat($('#money').html())*num).toFixed(2))
            $('#total').html(parseFloat($('#oneMoney').html()).toFixed(2));

        });
        //加的效果
        $(".add").click(function(){
            var n=$(this).prev().val();
            var num=parseInt(n)+1;
            var count = 5;
            if(num==0){ return;}
            if(num>count){
                return ;
            }
            $(this).prev().val(num);
            $('#oneMoney').html((parseFloat($('#money').html())*num).toFixed(2))
            $('#total').html(parseFloat($('#oneMoney').html()).toFixed(2));
        });
        //减的效果
        $(".jian").click(function(){
            var n=$(this).next().val();
            var num=parseInt(n)-1;
            if(num==0){ return}
            $(this).next().val(num);
            $('#oneMoney').html((parseFloat($('#oneMoney').html())-parseFloat($('#money').html())).toFixed(2))
            $('#total').html((parseFloat($('#oneMoney').html())+parseFloat($('#money').html())-parseFloat($('#money').html())).toFixed(2))
        });

    </script>-->







    <!-- Unnamed (矩形) -->
    <div id="u2163" class="ax_default label" style="cursor: pointer;">
        <div id="u2163_div" class="" tabindex="0"></div>
        <!-- Unnamed () -->
        <div id="u2164" class="text" style="visibility: visible; top: -1px; transform-origin: 54px 9.5px 0px;">
            <p><span>继续购物 &gt;&gt;</span></p>
        </div>
    </div>











    <!-- 节点 (热区) -->
    <div id="u2312" class="ax_default" data-label="节点">
    </div>
</div>

</body>
</html>